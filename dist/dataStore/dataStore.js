(()=>{var C=Object.defineProperty,A=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&I(e,n,t[n]);if(l)for(var n of l(t))O.call(t,n)&&I(e,n,t[n]);return e},E=(e,t)=>A(e,k(t));var W=(e,t)=>t.some(n=>e instanceof n),g,M;function F(){return g||(g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V(){return M||(M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var L=new WeakMap,p=new WeakMap,S=new WeakMap,h=new WeakMap,D=new WeakMap;function K(e){let t=new Promise((n,r)=>{let s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(i(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&L.set(n,e)}).catch(()=>{}),D.set(t,e),t}function R(e){if(p.has(e))return;let t=new Promise((n,r)=>{let s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});p.set(e,t)}var w={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return p.get(e);if(t==="objectStoreNames")return e.objectStoreNames||S.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return i(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function j(e){w=e(w)}function $(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(u(this),t,...n);return S.set(r,t.sort?t.sort():[t]),i(r)}:V().includes(e)?function(...t){return e.apply(u(this),t),i(L.get(this))}:function(...t){return i(e.apply(u(this),t))}}function z(e){return typeof e=="function"?$(e):(e instanceof IDBTransaction&&R(e),W(e,F())?new Proxy(e,w):e)}function i(e){if(e instanceof IDBRequest)return K(e);if(h.has(e))return h.get(e);let t=z(e);return t!==e&&(h.set(e,t),D.set(t,e)),t}var u=e=>D.get(e);function y(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let o=indexedDB.open(e,t),d=i(o);return r&&o.addEventListener("upgradeneeded",c=>{r(i(o.result),c.oldVersion,c.newVersion,i(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),d.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",()=>s())}).catch(()=>{}),d}var G=["get","getKey","getAll","getAllKeys","count"],H=["put","add","delete","clear"],b=new Map;function P(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(b.get(t))return b.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=H.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||G.includes(n)))return;let a=async function(o,...d){let c=this.transaction(o,s?"readwrite":"readonly"),m=c.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),s&&c.done]))[0]};return b.set(t,a),a}j(e=>E(B({},e),{get:(t,n,r)=>P(t,n)||e.get(t,n,r),has:(t,n)=>!!P(t,n)||e.has(t,n)}));var x="notesDB",f="notesStore",T=1,v;async function _(e,t){return await(await y(x,T,{upgrade(r){let s=r.createObjectStore(f,{keyPath:"id",autoIncrement:!0})}})).add(f,{title:t.title,timeStamp:t.timeStamp,content:t.content}),!0}async function q(){let e=await y(x,T,{upgrade(t){let n=t.createObjectStore(f,{keyPath:"id",autoIncrement:!0})}});try{v=await e.getAllFromIndex(f)}catch(t){return console.log(t),[]}return v}})();
//# sourceMappingURL=dataStore.js.map
