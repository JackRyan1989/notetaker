(()=>{var h=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var M=(t,e,n)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))Z.call(e,n)&&M(t,n,e[n]);if(j)for(var n of j(e))_.call(e,n)&&M(t,n,e[n]);return t},T=(t,e)=>X(t,Y(e)),tt=t=>h(t,"__esModule",{value:!0});var et=(t,e)=>{tt(t);for(var n in e)h(t,n,{get:e[n],enumerable:!0})};function k(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],k(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var O=class{constructor(e,n){this.elem=document.querySelector(e),this.data=new Proxy(n.data,k(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onInput=function(r){let{id:o,value:i}=r.target;this.data.id===null&&(this.data.id=1),o==="title"&&(this.data.title=i,this.data.timeStamp=Date.now()),o==="mainContent"&&(this.data.content=i)},this.elem.addEventListener("input",this.onInput.bind(this))}},w=O;function A(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],A(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var W=class{constructor(e,n,r){this.elem=document.querySelector(e),this.data=new Proxy(n.data,A(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onClick=function(o){console.log("clicked!"),o.target.id==="save"&&r.addItem(this.data.note.id,this.data.note)},this.elem.addEventListener("click",this.onClick.bind(this))}},y=W;function $(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],$(t)):e[n]},set:function(e,n,r){return e[n]=r,t.render(),!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var F=class{constructor(e,n,r){return(async()=>(this.elem=document.querySelector(e),this.rawData=await n.getItems(),this.data=new Proxy(this.rawData,$(this)),this.template=r.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this))()}},V=F;function b(t){return t?`<label for="mainContent">Notes</label> <textarea id="mainContent" name="mainContent" rows="20" cols="100" value=${t.content} placeholder="Notes">${t.content}</textarea>`:"<p>No data supplied.</p>"}function B(t){return t?`<label for="mainContent">Title</label> <textarea id="title" name="title" rows="1" cols="50" value=${t.title} placeholder="Title">${t.title}</textarea>`:"<p>No data supplied.</p>"}function x(t){return t?'<button id="save" class="saveButton">Save Note</button>':'<button class="saveButton disabled" aria-disabled="true">Save Note</button>'}function D(t){return t?'<button id="new" class="newButton">New Note</button>':'<button class="newButton disabled" aria-disabled="true">New Note</button>'}function g(t){return t.length===0?"<p>No data supplied.</p>":t?`${t}`:"<p>Loading...</p>"}var d={};et(d,{addItem:()=>lt,getItems:()=>mt});var nt=(t,e)=>e.some(n=>t instanceof n),H,K;function rt(){return H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ot(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var R=new WeakMap,I=new WeakMap,q=new WeakMap,v=new WeakMap,S=new WeakMap;function at(t){let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(s(t.result)),o()},a=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&R.set(n,t)}).catch(()=>{}),S.set(e,t),e}function it(t){if(I.has(t))return;let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),o()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});I.set(t,e)}var C={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I.get(t);if(e==="objectStoreNames")return t.objectStoreNames||q.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z(t){C=t(C)}function st(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(l(this),e,...n);return q.set(r,e.sort?e.sort():[e]),s(r)}:ot().includes(t)?function(...e){return t.apply(l(this),e),s(R.get(this))}:function(...e){return s(t.apply(l(this),e))}}function ct(t){return typeof t=="function"?st(t):(t instanceof IDBTransaction&&it(t),nt(t,rt())?new Proxy(t,C):t)}function s(t){if(t instanceof IDBRequest)return at(t);if(v.has(t))return v.get(t);let e=ct(t);return e!==t&&(v.set(t,e),S.set(e,t)),e}var l=t=>S.get(t);function L(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(t,e),u=s(a);return r&&a.addEventListener("upgradeneeded",c=>{r(s(a.result),c.oldVersion,c.newVersion,s(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),u.then(c=>{i&&c.addEventListener("close",()=>i()),o&&c.addEventListener("versionchange",()=>o())}).catch(()=>{}),u}var ut=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],E=new Map;function G(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(E.get(e))return E.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,o=dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ut.includes(n)))return;let i=async function(a,...u){let c=this.transaction(a,o?"readwrite":"readonly"),p=c.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),o&&c.done]))[0]};return E.set(e,i),i}z(t=>T(N({},t),{get:(e,n,r)=>G(e,n)||t.get(e,n,r),has:(e,n)=>!!G(e,n)||t.has(e,n)}));var J="notesDB",m="notesStore",Q=1,P;async function lt(t,e){let n=await L(J,Q,{upgrade(r){let o=r.createObjectStore(m,{keyPath:"id",autoIncrement:!0})}});try{await n.add(m,{title:e.title,timeStamp:e.timeStamp,content:e.content})}catch(r){console.log(r)}}async function mt(){let t=await L(J,Q,{upgrade(e){e.createObjectStore(m,{keyPath:"id",autoIncrement:!0}).createIndex("timeStamp","timeStamp")}});try{P=await t.getAllFromIndex(m,"timeStamp")}catch(e){return console.log(e),[]}return console.log(P),P}"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js");var f={id:null,timeStamp:null,title:"",content:""},U=[];(async()=>{let t=new w("#titleEntryContainer",{data:f,template:B}),e=new w("#noteEntryContainer",{data:f,template:b}),n=new y("#saveContainer",{data:{note:f,notes:U},template:x},d),r=new y("#newContainer",{data:{note:f,notes:U},template:D},d),o=await new V("#notesListContainer",d,{template:g});t.render(),e.render(),n.render(),r.render(),o.render()})();})();
//# sourceMappingURL=app.js.map
