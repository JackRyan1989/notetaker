(()=>{var p=Object.defineProperty,z=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var M=(t,e,n)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P=(t,e)=>{for(var n in e||(e={}))J.call(e,n)&&M(t,n,e[n]);if(L)for(var n of L(e))Q.call(e,n)&&M(t,n,e[n]);return t},j=(t,e)=>z(t,G(e)),U=t=>p(t,"__esModule",{value:!0});var X=(t,e)=>{U(t);for(var n in e)p(t,n,{get:e[n],enumerable:!0})};function N(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],N(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var T=class{constructor(e,n){this.elem=document.querySelector(e),this.data=new Proxy(n.data,N(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onInput=function(r){let{id:o,value:i}=r.target;this.data.id===null&&(this.data.id=1),o==="title"&&(this.data.title=i,this.data.timeStamp=Date.now()),o==="mainContent"&&(this.data.content=i)},this.elem.addEventListener("input",this.onInput.bind(this))}},h=T;function k(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],k(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var A=class{constructor(e,n,r){this.elem=document.querySelector(e),this.data=new Proxy(n.data,k(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onClick=function(o){o.target.id==="save"&&r.addItem(this.data.note.id,this.data.note)},this.elem.addEventListener("click",this.onClick.bind(this))}},b=A;function w(t){return t?`<label for="mainContent">Notes</label> <textarea id="mainContent" name="mainContent" rows="20" cols="100" value=${t.content} placeholder="Notes">${t.content}</textarea>`:"<p>No data supplied.</p>"}function y(t){return t?`<label for="mainContent">Title</label> <textarea id="title" name="title" rows="1" cols="50" value=${t.title} placeholder="Title">${t.title}</textarea>`:"<p>No data supplied.</p>"}function B(t){return t?'<button id="save" class="saveButton">Save Note</button>':'<button class="saveButton disabled" aria-disabled="true">Save Note</button>'}function x(t){return t?'<button id="new" class="newButton">New Note</button>':'<button class="newButton disabled" aria-disabled="true">New Note</button>'}var l={};X(l,{addItem:()=>it,getItems:()=>st});var Y=(t,e)=>e.some(n=>t instanceof n),O,W;function Z(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _(){return W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var F=new WeakMap,D=new WeakMap,$=new WeakMap,I=new WeakMap,v=new WeakMap;function tt(t){let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(s(t.result)),o()},a=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&F.set(n,t)}).catch(()=>{}),v.set(e,t),e}function et(t){if(D.has(t))return;let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),o()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});D.set(t,e)}var S={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function V(t){S=t(S)}function nt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(d(this),e,...n);return $.set(r,e.sort?e.sort():[e]),s(r)}:_().includes(t)?function(...e){return t.apply(d(this),e),s(F.get(this))}:function(...e){return s(t.apply(d(this),e))}}function rt(t){return typeof t=="function"?nt(t):(t instanceof IDBTransaction&&et(t),Y(t,Z())?new Proxy(t,S):t)}function s(t){if(t instanceof IDBRequest)return tt(t);if(I.has(t))return I.get(t);let e=rt(t);return e!==t&&(I.set(t,e),v.set(e,t)),e}var d=t=>v.get(t);function C(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(t,e),u=s(a);return r&&a.addEventListener("upgradeneeded",c=>{r(s(a.result),c.oldVersion,c.newVersion,s(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),u.then(c=>{i&&c.addEventListener("close",()=>i()),o&&c.addEventListener("versionchange",()=>o())}).catch(()=>{}),u}var ot=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],g=new Map;function K(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(g.get(e))return g.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,o=at.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ot.includes(n)))return;let i=async function(a,...u){let c=this.transaction(a,o?"readwrite":"readonly"),f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),o&&c.done]))[0]};return g.set(e,i),i}V(t=>j(P({},t),{get:(e,n,r)=>K(e,n)||t.get(e,n,r),has:(e,n)=>!!K(e,n)||t.has(e,n)}));var R="notesDB",E="notesStore",H=1;async function it(t,e){return await(await C(R,H,{upgrade(r){let o=r.createObjectStore(E,{keyPath:"id",autoIncrement:!0})}})).add(E,{title:e.title,timeStamp:e.timeStamp,content:e.content}),!0}async function st(){return await(await C(R,H,{upgrade(n){n.createObjectStore(E,{keyPath:"id",autoIncrement:!0}).createIndex("timeStamp","timeStamp")}})).getAllFromIndex("articles","date")}"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js");var m={id:null,timeStamp:null,title:"",content:""},q=[],ct=new h("#titleEntryContainer",{data:m,template:y}),ut=new h("#noteEntryContainer",{data:m,template:w}),dt=new b("#saveContainer",{data:{note:m,notes:q},template:B},l),lt=new b("#newContainer",{data:{note:m,notes:q},template:x},l);ct.render();ut.render();dt.render();lt.render();})();
//# sourceMappingURL=app.js.map
