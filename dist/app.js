(()=>{var h=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var j=(t,e,n)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||(e={}))Z.call(e,n)&&j(t,n,e[n]);if(P)for(var n of P(e))_.call(e,n)&&j(t,n,e[n]);return t},N=(t,e)=>X(t,Y(e)),tt=t=>h(t,"__esModule",{value:!0});var et=(t,e)=>{tt(t);for(var n in e)h(t,n,{get:e[n],enumerable:!0})};function T(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],T(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var k=class{constructor(e,n){this.elem=document.querySelector(e),this.data=new Proxy(n.data,T(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onInput=function(r){let{id:o,value:i}=r.target;this.data.id===null&&(this.data.id=1),o==="title"&&(this.data.title=i,this.data.timeStamp=Date.now()),o==="mainContent"&&(this.data.content=i)},this.elem.addEventListener("input",this.onInput.bind(this))}},w=k;function O(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],O(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var A=class{constructor(e,n,r){this.elem=document.querySelector(e),this.data=new Proxy(n.data,O(this)),this.template=n.template,this.render=function(){this.elem.innerHTML=this.template(this.data)},this.onClick=function(o){o.target.id==="save"&&r.addItem(this.data.note.id,this.data.note)},this.elem.addEventListener("click",this.onClick.bind(this))}},b=A;function W(t){return{get:function(e,n){return["object Object","object Array"].includes(Object.prototype.toString.call(e[n]))?new Proxy(e[n],W(t)):e[n]},set:function(e,n,r){return e[n]=r,!0},deleteProperty:function(e,n){return delete e[n],t.render(),!0}}}var $=class{constructor(e,n,r){this.elem=document.querySelector(e),this.rawData=[],n.getItems().then(function(o){console.log(o),this.rawData=o}),this.data=new Proxy(this.rawData,W(this)),this.template=r.template,this.render=function(){this.elem.innerHTML=this.template(this.data)}}},F=$;function y(t){return t?`<label for="mainContent">Notes</label> <textarea id="mainContent" name="mainContent" rows="20" cols="100" value=${t.content} placeholder="Notes">${t.content}</textarea>`:"<p>No data supplied.</p>"}function B(t){return t?`<label for="mainContent">Title</label> <textarea id="title" name="title" rows="1" cols="50" value=${t.title} placeholder="Title">${t.title}</textarea>`:"<p>No data supplied.</p>"}function x(t){return t?'<button id="save" class="saveButton">Save Note</button>':'<button class="saveButton disabled" aria-disabled="true">Save Note</button>'}function D(t){return t?'<button id="new" class="newButton">New Note</button>':'<button class="newButton disabled" aria-disabled="true">New Note</button>'}function I(t){return t.length===0?"<p>No data supplied.</p>":t?`${t}`:"<p>Loading...</p>"}var d={};et(d,{addItem:()=>lt,getItems:()=>ft});var nt=(t,e)=>e.some(n=>t instanceof n),V,H;function rt(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ot(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var K=new WeakMap,g=new WeakMap,R=new WeakMap,v=new WeakMap,C=new WeakMap;function at(t){let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(s(t.result)),o()},a=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&K.set(n,t)}).catch(()=>{}),C.set(e,t),e}function it(t){if(g.has(t))return;let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),o()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});g.set(t,e)}var L={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return g.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q(t){L=t(L)}function st(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(l(this),e,...n);return R.set(r,e.sort?e.sort():[e]),s(r)}:ot().includes(t)?function(...e){return t.apply(l(this),e),s(K.get(this))}:function(...e){return s(t.apply(l(this),e))}}function ct(t){return typeof t=="function"?st(t):(t instanceof IDBTransaction&&it(t),nt(t,rt())?new Proxy(t,L):t)}function s(t){if(t instanceof IDBRequest)return at(t);if(v.has(t))return v.get(t);let e=ct(t);return e!==t&&(v.set(t,e),C.set(e,t)),e}var l=t=>C.get(t);function S(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(t,e),u=s(a);return r&&a.addEventListener("upgradeneeded",c=>{r(s(a.result),c.oldVersion,c.newVersion,s(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),u.then(c=>{i&&c.addEventListener("close",()=>i()),o&&c.addEventListener("versionchange",()=>o())}).catch(()=>{}),u}var ut=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],E=new Map;function z(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(E.get(e))return E.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,o=dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ut.includes(n)))return;let i=async function(a,...u){let c=this.transaction(a,o?"readwrite":"readonly"),p=c.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),o&&c.done]))[0]};return E.set(e,i),i}q(t=>N(M({},t),{get:(e,n,r)=>z(e,n)||t.get(e,n,r),has:(e,n)=>!!z(e,n)||t.has(e,n)}));var G="notesDB",f="notesStore",J=1,Q;async function lt(t,e){return await(await S(G,J,{upgrade(r){let o=r.createObjectStore(f,{keyPath:"id",autoIncrement:!0})}})).add(f,{title:e.title,timeStamp:e.timeStamp,content:e.content}),!0}async function ft(){let t=await S(G,J,{upgrade(e){let n=e.createObjectStore(f,{keyPath:"id",autoIncrement:!0})}});try{Q=await t.getAllFromIndex(f)}catch(e){return console.log(e),[]}return Q}"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js");var m={id:null,timeStamp:null,title:"",content:""},U=[],mt=new w("#titleEntryContainer",{data:m,template:B}),pt=new w("#noteEntryContainer",{data:m,template:y}),ht=new b("#saveContainer",{data:{note:m,notes:U},template:x},d),wt=new b("#newContainer",{data:{note:m,notes:U},template:D},d),bt=new F("#notesListContainer",d,{template:I});mt.render();pt.render();ht.render();wt.render();bt.render();})();
//# sourceMappingURL=app.js.map
